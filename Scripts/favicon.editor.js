/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

(function () {
    /**
     * Opens media library picker.
     */
    var openMediaPicker = function (e) {
        e.preventDefault();

        var adminIndex = location.href.toLowerCase().indexOf("/admin/"),
            url;

        if (adminIndex === -1) {
            return;
        }

        url = location.href.substr(0, adminIndex) + "/Admin/Orchard.MediaLibrary?dialog=true";

        $.colorbox({
            href: url,
            iframe: true,
            reposition: true,
            width: '90%',
            height: '90%',
            onLoad: function () {
                // hide the scrollbars from the main window
                $('html, body').css('overflow', 'hidden');
            },
            onClosed: function () {
                var selectedData = $.colorbox.selectedData;

                $('html, body').css('overflow', '');

                if (selectedData.length === 0) {
                    return;
                }

                setMedia(selectedData);
            }
        });
    };

    var setMedia = function (selectedData) {
        document.querySelector('.js-favicon .js-favicon-url-input').value = selectedData[0].resource;
    };

    /**
     * Initialises favicon editor
     */
    var init = function () {
        var $mediaLibrary = document.querySelector('.js-favicon .js-open-media-library');

        if ($mediaLibrary && $mediaLibrary.length > 0) {
            $mediaLibrary.addEventListener('click', openMediaPicker);
        }
    };

    init();
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZhdmljb24uZWRpdG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxBQUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJmYXZpY29uLmVkaXRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIE9wZW5zIG1lZGlhIGxpYnJhcnkgcGlja2VyLlxyXG4gICAgICovXHJcbiAgICB2YXIgb3Blbk1lZGlhUGlja2VyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHZhciBhZG1pbkluZGV4ID0gbG9jYXRpb24uaHJlZi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCIvYWRtaW4vXCIpLFxyXG4gICAgICAgICAgICB1cmw7XHJcblxyXG4gICAgICAgIGlmIChhZG1pbkluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1cmwgPSBsb2NhdGlvbi5ocmVmLnN1YnN0cigwLCBhZG1pbkluZGV4KSArIFwiL0FkbWluL09yY2hhcmQuTWVkaWFMaWJyYXJ5P2RpYWxvZz10cnVlXCI7XHJcblxyXG4gICAgICAgICQuY29sb3Jib3goe1xyXG4gICAgICAgICAgICBocmVmOiB1cmwsXHJcbiAgICAgICAgICAgIGlmcmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgcmVwb3NpdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgd2lkdGg6ICc5MCUnLFxyXG4gICAgICAgICAgICBoZWlnaHQ6ICc5MCUnLFxyXG4gICAgICAgICAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGhpZGUgdGhlIHNjcm9sbGJhcnMgZnJvbSB0aGUgbWFpbiB3aW5kb3dcclxuICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNsb3NlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9ICQuY29sb3Jib3guc2VsZWN0ZWREYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5jc3MoJ292ZXJmbG93JywgJycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZERhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNldE1lZGlhKHNlbGVjdGVkRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHNldE1lZGlhID0gZnVuY3Rpb24gKHNlbGVjdGVkRGF0YSkge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1mYXZpY29uIC5qcy1mYXZpY29uLXVybC1pbnB1dCcpLnZhbHVlID0gc2VsZWN0ZWREYXRhWzBdLnJlc291cmNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpc2VzIGZhdmljb24gZWRpdG9yXHJcbiAgICAgKi9cclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkbWVkaWFMaWJyYXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWZhdmljb24gLmpzLW9wZW4tbWVkaWEtbGlicmFyeScpO1xyXG5cclxuICAgICAgICBpZiAoJG1lZGlhTGlicmFyeSAmJiAkbWVkaWFMaWJyYXJ5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJG1lZGlhTGlicmFyeS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5NZWRpYVBpY2tlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBpbml0KCk7XHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
